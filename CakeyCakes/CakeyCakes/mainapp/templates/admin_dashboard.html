{% extends 'base.html' %}
{% load static %}

{% block title %}
Admin View
{% endblock %}

{% block content %}
<main class="relative flex flex-col md:left-0 w-full items-center justify-center p-4">
    <div class="flex flex-col w-11/12 md:w-1/2 lg:w-1/3 bg-background border-2 border-foreground p-2 text-foreground rounded-xl space-y-2">
        <h1><b>Admin Dashboard</b></h1>
        <p class="hidden md:block"><sup>(Ctrl+F to search)</sup></p>
        <h3><b>Users</b></h3>
        <table class="table-fixed text-start rounded-lg md:p-2 bg-imagebg">
            <tr class="border-[1px] border-foreground">
                <th class="border-[1px] border-foreground">Username</th>
                <th class="border-[1px] border-foreground">Super User</th>
                <th class="border-[1px] border-foreground">Edit</th>
                <th class="border-[1px] border-foreground">Delete</th>
            </tr>
            {% for user in users %}
            <tr class="border-[1px] border-foreground">
                <td class="border-[1px] border-foreground">{{ user.username }}</td>
                <td class="border-[1px] border-foreground">{% if user.is_superuser %} Yes {% else %} No {% endif %}</td>
                <td class="border-[1px] border-foreground"><a class="hover:text-hover underline" href="{% url 'edit-model' 'User' user.id %}">Edit ↗️</a></td>
                {% if username == user.username %}
                <td class="border-[1px] border-foreground"><del>Delete ↗️</del></td>
                {% elif user.is_superuser %}
                <td class="border-[1px] border-foreground"><del>Delete ↗️</del></td>
                {% else %}
                <td class="border-[1px] border-foreground"><a class="hover:text-hover underline" href="{% url 'delete-model' 'User' user.id %}">Delete ↗️</a></td>
                {% endif %}
            </tr>
            {% endfor %}
        </table>
        <a class="text-center hover:text-hover underline p-1 bg-imagebg rounded-lg border-2 border-foreground" href="{% url 'create-model' 'User' %}"><button type="button"><h6><b>Create a new User model</b></h6></button></a>
        <div class="p-1 rounded-lg w-full space-y-2">
            <h3><b>Recipes</b></h3>
            {% for recipe in recipes %}
            <div class="rounded-lg border-2 border-foreground p-2 bg-imagebg">
                <h6 class="underline">Name</h6>
                <p>{{ recipe.name }}</p><br>
                <h6 class="underline">Image</h6>
                <img class="rounded-lg border-2 border-foreground w-[100%] lg:w-[50%]" src="{% static recipe.image_link %}"><br>
                <h6 class="underline">Description</h6>
                <p>{{ recipe.description|linebreaksbr }}</p><br>
                <h6 class="underline">Ingredients</h6>
                <p>{{ recipe.ingredients|linebreaksbr }}</p><br>
                <h6 class="underline">Recipe</h6>
                <p>{{ recipe.recipe|linebreaksbr }}</p><br>
                <h6 class="underline">Is Gluten-free</h6>
                <p>{% if recipe.gluten_free %} Yes {% else %} No {% endif %}</p><br>
                <a class="w-full" href="{% url 'edit-model' 'Recipe' recipe.id %}"><button class="w-full hover:text-hover text-center p-1 bg-background rounded-md border-2 border-foreground" type="button"><b>Edit</b></button></a>
                <a class="w-full" href="{% url 'delete-model' 'Recipe' recipe.id %}"><button class="mt-2 w-full hover:text-hover text-center p-1 bg-background rounded-md border-2 border-foreground" type="button"><b>Delete</b></button></a>
            </div>
            {% endfor %}
        </div>
        <a class="text-center hover:text-hover underline p-1 bg-imagebg rounded-lg border-2 border-foreground" href="{% url 'create-model' 'Recipe' %}"><button type="button"><h6><b>Create a new Recipe model</b></h6></button></a>
        <div class="p-1 rounded-lg w-full space-y-2">
            <h3><b>Cakes</b></h3>
            {% for cake in cakes %}
            <div class="rounded-lg border-2 border-foreground p-2 bg-imagebg">
                <h6 class="underline">Name</h6>
                <p>{{ cake.name }}</p><br>
                <h6 class="underline">Image</h6>
                <img class="rounded-lg border-2 border-foreground w-[100%] lg:w-[50%]" src="{% static cake.recipe.image_link %}"><br>
                <h6 class="underline">Description</h6>
                <p>{{ cake.description|linebreaksbr }}</p><br>
                <h6 class="underline">Recipe</h6>
                <p>{{ cake.recipe.recipe|linebreaksbr }}</p><br>
                <h6 class="underline">Is Gluten-free</h6>
                <p>{% if cake.recipe.gluten_free %} Yes {% else %} No {% endif %}</p><br>
                <a class="w-full" href="{% url 'edit-model' 'Cake' cake.id %}"><button class="w-full hover:text-hover text-center p-1 bg-background rounded-md border-2 border-foreground" type="button"><b>Edit</b></button></a>
                <a class="w-full" href="{% url 'delete-model' 'Cake' cake.id %}"><button class="mt-2 w-full hover:text-hover text-center p-1 bg-background rounded-md border-2 border-foreground" type="button"><b>Delete</b></button></a>
            </div>
            {% endfor %}
        </div>
        <a class="text-center hover:text-hover underline p-1 bg-imagebg rounded-lg border-2 border-foreground" href="{% url 'create-model' 'Cake' %}"><button type="button"><h6><b>Create a new Cake model</b></h6></button></a>
    </div>
</main>
{% endblock %}
